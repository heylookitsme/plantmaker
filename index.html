<html>
	<head>
		<title>Plant Maker</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>

	<div style="color:white;top:30px;left:30px;position:absolute;font-size:30px"> <u style="font-size:50px">hi! this is my Technica 2019 project. press WASD to move around </u><br>
 family:<select onChange="changeFam(this, event)">
  <option value="brassicaceae">brassicaceae (mustard)</option>
  <option value="oxalidaceae">oxalidaceae (uh)</option>
  <option value="malvaceae">malvaceae (think cattails?)</option>
  <option value="cactaceae">hydrophyllaceae (waterleaf)</option>
  <option value="zygophyllaceae">zygophyllaceae (caltrop)</option>
</select>
<br>
# of subnodes:<input onChange="changeNodeNum(this.value)" type="number" />
<br>
depth: <input onChange="changeDepth(this.value)" type="number" />
<br><br>
<i style="font-size:14px">yeah, highkey its not finished, thanks for coming to my ted talk</i>
</div>
		<script src="js/three.js"></script>
		<script>
//disclaimer: javascript is usually ugly, so it doesnt matter if i write terrible javascript ðŸ˜‚

//add a new scene 
var scene = new THREE.Scene();
//add a new camera		
var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.4, 1000 );
camera.position.z = 100;
camera.position.x = 50;
			camera.position.y = 10;

//add a new renderer
			var renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

//new icosahedron :O
var geometry = new THREE.IcosahedronGeometry(20, 0);
var material = new THREE.MeshNormalMaterial();
var icosahedron = new THREE.Mesh( geometry, material );
scene.add( icosahedron );
icosahedron.position.x = 60;
icosahedron.position.y=0;

//new light 
var light = new THREE.DirectionalLight(0xFFFFFF, 4);
light.position.set(0,6,10);
scene.add(light);

d=-1;
var animate = function () {
requestAnimationFrame( animate );
renderer.render( scene, camera );
icosahedron.rotation.y +=.03;
};

//instantiate the. lines and geometry to. draw the plant. 
var mathe = new THREE.LineBasicMaterial({color: 0x00FF00});
var geome = new THREE.Geometry();
//draw plant
makePlant("type",9,9,8);


//generate and draw leaf
function leaf(x,y,z,length,height,width,type){
var geometry = new THREE.PlaneGeometry( length, height, width );
var material = new THREE.MeshBasicMaterial( {color: 0x00ff00, side: THREE.DoubleSide} );
var plane = new THREE.Mesh( geometry, material );
plane.position.x = x;
plane.position.y = y;
plane.position.z = z;
scene.add( plane );
}

//generate and draw stems 
function stem(x,y,z,length,div, depth){
if (depth > 0){
for(i=0; i<div;i++){
b = Math.cos(i)*20;
geome.vertices.push(new THREE.Vector3( x, y, z));
geome.vertices.push(new THREE.Vector3( b+x+length, b+y+length, (b/2)+z+length));
leaf(b+x+length,b+y+length,(b/2)+z+length,2,2,2,"yeah");
geome.vertices.push(new THREE.Vector3( x, y, z));
}
stem(x+length,y+(length/2),z+(length/2),length,div, depth-1);
}
if (depth ==0){
console.log("end")
}
}

//generate and draw flower
function flower(type){

//sepals
//petals
//stamens

}

//makes the plant. 
//yeah it goes stem{leaf} and uh. actually i dont know why i seperated them but im pretty sure 
//it'll become apparent when. it does ðŸ˜‚
function makePlant(type,width,height,depth){
	this.type = type; 
	this.width = width;
	this.height = height; 
	stem(-40,-40,0,height,5,depth);
	var line = new THREE.Line( geome, mathe );
	scene.add(line);
	
}

//types of plants and their properties. 
//like maybe a json data later, but an enum is fine for now 
var SizeEnum = {
  brassicaceae: 1,
  oxalidaceae: 2,
  malvaceae: 3,
};

//movement Event
document.addEventListener("keydown", onDocumentKeyDown, false);
ySpeed=1;
xSpeed=1;
function onDocumentKeyDown(event) {
    var keyCode = event.which;
    if (keyCode == 87) {
        camera.position.y += ySpeed;
    } else if (keyCode == 83) {
        camera.position.y -= ySpeed;
    } else if (keyCode == 65) {
        camera.position.x -= xSpeed;
    } else if (keyCode == 68) {
        camera.position.x += xSpeed;
    } else if (keyCode == 32) {
        camera.position.set(0, 0, 0);
    }
};

//so we haven't talked about how i literally do not use javascript
//why didn't i make a java applet?
//greeeaattttt question 
//i literally fucking rename "this" and its like "okay we work now" 
//and im jsut here, sobbing into my hands 
//because i dont understand javascrip
//im like. the peak of the dunning kruger effect
//help 
function changeFam(a, event) {
    console.log(a.options[a.selectedIndex].value);
//SHOULD I MAKE A NEW ONE EVERYTIME AND CLEAR THE SCREEN INSTEAD OF AAKJEHKJEHKKJSHDKJFHJKDFHKJH 
//updating figures is difficult i dont like it it makes me all kinds of sad	
makePlant(a.options[a.selectedIndex].value,40,40,4);
}

function changeNodeNum(newNum) {
	//oKAY SO I KINDA WROTE THIS ALL WRONG SO. WE DONT TLK ABOUT HER. RN. AND. I DONT THINK WE'RE GOING TO TALK ABOUT HER
	//JUST PRETEND SHE DOESNT EXIST HAHAHAHHAHAHAHAH
	//CAN WE TALK ABT HOW THE GEOMETHERY DOESNT GET RESET EVERY TIME LIKE IM CRYING THIS IS SO BAAAAAAAAAAAAAAAAAAD
    console.log("new node num: ",newNum);
makePlant("haha",6,6,7);
}
function changeDepth(newNum) {
    console.log("new depth: ",newNum);
makePlant("haha".value,8,8,newNum);
}

//should i have seperated my drawing functions and my math 
//yeah lol 
//see you only know when something is Very Very Wrong when like. 
//you think about it 
//and youre like 
//"ah. oh no"
//there h a s to be a way to make just a whole field out of some data i swear to g
animate();
		</script>
	</body>
</html>
